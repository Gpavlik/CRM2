<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä –≤—ñ–∑–∏—Ç—ñ–≤</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <style>
    /* –ì–æ–ª–æ–≤–Ω–∏–π —Å—Ç–∏–ª—å */
    body {
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      background: linear-gradient(135deg, #006400, #004d00);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1, h2 {
      margin-top: 30px;
      text-align: center;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .dashboard {
      max-width: 1000px;
      width: 95%;
      margin: 20px auto;
      padding: 20px;
      background: #008000;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    /* –§—ñ–ª—å—Ç—Ä–∏ */
    #filterBar {
      margin-bottom: 20px;
      padding: 10px;
      background: #004d00;
      border-radius: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }
    #filterBar label {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    #filterBar button {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background-color: #006400;
      color: #ffffff;
      font-size: 0.9rem;
    }
    #filterBar button:hover {
      background-color: #003300;
    }

    /* –ö–∞–ª–µ–Ω–¥–∞—Ä */
    #calendar {
      background: #ffffff;
      color: #000000;
      border-radius: 8px;
      padding: 10px;
    }
    .fc-event {
      cursor: pointer;
      border-radius: 4px;
    }

    /* –ú–µ–Ω—é –≤—ñ–∑–∏—Ç—É */
    #visitMenu {
      position: fixed; left: 50%; top: 40%;
      transform: translate(-50%, -40%) scale(0.95);
      background: #008000; border: 1px solid #ccc;
      padding: 15px; border-radius: 8px;
      z-index: 10000; min-width: 320px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      opacity: 0; pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
      color: #fff;
    }
    #visitMenu.show { opacity: 1; transform: translate(-50%, -40%) scale(1); pointer-events: auto; }
    #visitMenu h4 { margin: 0 0 8px; }
    #visitMenu .menu-actions { display: grid; gap: 8px; margin-top: 12px; }
    #visitMenu button {
      width: 100%; padding: 8px;
      border: none; border-radius: 6px;
      cursor: pointer; color: #fff;
    }
    .btn-start { background: #4caf50; }
    .btn-cancel { background: #f44336; }
    .btn-reschedule { background: #2196f3; }
    .btn-edit { background: #ff9800; }
    .btn-close { background: #777; }

    /* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ */
    .modal {
      display: none;
      position: fixed;
      z-index: 20000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: #008000;
      margin: 5% auto;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 900px;
      color: #fff;
    }
    .close {
      float: right;
      font-size: 24px;
      cursor: pointer;
    }

    /* –í–∫–ª–∞–¥–∫–∏ */
    .tabs { display: flex; flex-direction: column; }
    .tab-buttons {
      display: flex;
      border-bottom: 1px solid #ccc;
      margin-bottom: 12px;
    }
    .tab-buttons button {
      flex: 1;
      padding: 10px;
      background: #004d00;
      border: none;
      cursor: pointer;
      font-weight: bold;
      color: #fff;
    }
    .tab-buttons button.active {
      background: #2196f3;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .tab-content label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .tab-content table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background: #fff;
      color: #000;
    }
    .tab-content th, .tab-content td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    .tab-content th { background: #eee; }
    .tab-content input {
      width: 90%;
      padding: 4px;
      text-align: center;
    }
  </style>
</head>
<body>
  <img src="../logo.svg" alt="logo" width="220">
  <h1>üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä –≤—ñ–∑–∏—Ç—ñ–≤</h1>

  <div class="dashboard">
    <!-- –§—ñ–ª—å—Ç—Ä–∏ -->
    <div id="filterBar">
      <label><input type="checkbox" id="filterPlanned" checked> –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ</label>
      <label><input type="checkbox" id="filterInProgress" checked> –í –ø—Ä–æ—Ü–µ—Å—ñ</label>
      <label><input type="checkbox" id="filterCancelled" checked> –í—ñ–¥–º—ñ–Ω–µ–Ω–æ</label>
      <label><input type="checkbox" id="filterRescheduled" checked> –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ</label>
      <label><input type="checkbox" id="filterDone" checked> –ü—Ä–æ–≤–µ–¥–µ–Ω–æ</label>
      <button onclick="rerenderCalendar()">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
      <a href="../labcards/labs.html"><button type="button">üè• –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ–π</button></a>
    </div>

    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä -->
    <div id="calendar"></div>
  </div>

  <!-- –ú–µ–Ω—é –¥—ñ–π -->
  <div id="visitMenu">
    <h4 id="visitMenuTitle">–ú–µ–Ω—é –≤—ñ–∑–∏—Ç—É</h4>
    <div id="visitMenuInfo"></div>
    <div class="menu-actions">
      <button class="btn-start">–†–æ–∑–ø–æ—á–∞—Ç–∏</button>
      <button class="btn-cancel">–í—ñ–¥–º—ñ–Ω–∏—Ç–∏</button>
      <button class="btn-reschedule">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
      <button class="btn-edit">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</button>
      <button class="btn-close" onclick="hideVisitMenu()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
  <div id="visitModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeVisitModal()">&times;</span>
      <h3>–í—ñ–∑–∏—Ç</h3>
      <div id="visitModalTabs"></div>
      <button onclick="submitVisitData()">‚úÖ –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ</button>
    </div>
  </div>

  <!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ -->
  <script src="../shared/visits.js"></script>
  <script src="../shared/calendar.js"></script>
</body>
</html>
