<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞—Ä—Ç–∫–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó</title>
  <style>
    body {
  font-family: Arial, sans-serif;
  margin: 0; padding: 0;
  background: linear-gradient(135deg, #006400, #004d00);
  color: #fff;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1 { margin-top: 30px; }
form {
  max-width: 1000px;
  width: 95%;
  margin: 20px auto;
  padding: 20px;
  background: #008000;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.6);
}
form label {
  display: block;
  margin: 12px 0;
}
input, select {
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: none;
}
.form-actions {
  margin-top: 20px;
}
.form-actions button {
  margin-right: 10px;
  background: #006400;
  color: white;
  border: none;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 6px;
}
.form-actions button:hover {
  background: #003300;
}
.device-block, #taskPreviewSection {
  border: 1px solid #ccc;
  padding: 10px;
  margin-bottom: 12px;
  background: #fff;
  border-radius: 6px;
  color: #000;
}
  </style>
  <script src="labcards.js" defer></script>
  <script src="logistics.js" defer></script>
</head>
<body>
  <img src="../logo.svg" alt="logo" width="220">
  <h1>üß™ –ö–∞—Ä—Ç–∫–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó</h1>

  <form id="labForm">
    <label>–ù–∞–∑–≤–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞:
      <input type="text" id="partnerName" required>
    </label>

    <label>–û–±–ª–∞—Å—Ç—å:
      <input list="regionList" id="region" onfocus="fillRegionOptions()" onchange="fillCityOptions()">
      <datalist id="regionList"></datalist>
    </label>

    <label>–ú—ñ—Å—Ç–æ:
      <input list="cityList" id="city" onfocus="fillCityOptions()" onchange="fillLpzOptions()">
      <datalist id="cityList"></datalist>
    </label>

    <label>–õ–ü–ó:
      <input list="lpzList" id="lpz" onfocus="fillLpzOptions()" onchange="prefillLabData()">
      <datalist id="lpzList"></datalist>
    </label>

    <label>–ê–¥—Ä–µ—Å–∞:
      <input type="text" id="labAddress">
    </label>

    <label>–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–æ—Å–æ–±–∞):
      <input type="text" id="contractor">
    </label>

    <label>–¢–µ–ª–µ—Ñ–æ–Ω:
      <input type="text" id="phone">
    </label>

    <label>–Ñ–î–†–ü–û–£:
      <input type="text" id="labEdrpou" required>
    </label>

    <label>–†–µ–≥—ñ–æ–Ω:
      <input type="text" id="labManager">
    </label>

    <!-- –ü—Ä–∏–ª–∞–¥–∏ -->
    <section id="devicesSection" style="display:none;">
      <h2>üîß –ü—Ä–∏–ª–∞–¥–∏</h2>
      <div id="devicesContainer"></div>
      <button type="button" onclick="addDevice()">‚ûï –î–æ–¥–∞—Ç–∏ –ø—Ä–∏–ª–∞–¥</button>
    </section>

    <!-- –ü—Ä–µ–≤‚Äô—é –∑–∞–¥–∞—á -->
    <section id="taskPreviewSection">
      <h2>üìã –ü—Ä–µ–≤‚Äô—é –∑–∞–¥–∞—á</h2>
      <div id="taskPreview"></div>
    </section>

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="form-actions">
      <button type="button" onclick="showTaskPreviewBeforeSave(getLabCardFromForm(), () => saveLabCard())">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
      <button type="button" onclick="updateLabCard(document.getElementById('labEdrpou').value)">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
    </div>
  </form>

  <script>
    // –í–∏–∫–ª–∏–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    //document.addEventListener("DOMContentLoaded", initLabCard);

    // –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö –∑ —Ñ–æ—Ä–º–∏
    function getLabCardFromForm() {
      return {
        partner: document.getElementById("partnerName").value.trim(),
        region: document.getElementById("region").value.trim(),
        city: document.getElementById("city").value.trim(),
        institution: document.getElementById("lpz").value.trim(),
        address: document.getElementById("labAddress").value.trim(),
        contractor: document.getElementById("contractor").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        edrpou: document.getElementById("labEdrpou").value.trim(),
        manager: document.getElementById("labManager").value.trim(),
        devices: [] // –±—É–¥–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ —É JS
      };
    }
  </script>
</body>
</html>
